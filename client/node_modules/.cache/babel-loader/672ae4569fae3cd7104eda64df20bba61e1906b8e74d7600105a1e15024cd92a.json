{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import\"./QuizGame.css\";import Texts from\"./Text\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const QuizGame=_ref=>{let{quizId}=_ref;const[questions,setQuestions]=useState([]);const[currentIndex,setCurrentIndex]=useState(0);const[feedback,setFeedback]=useState(\"\");const[citizenCount,setCitizenCount]=useState(1);const CiviliansSprites=[require(\"../../assets/civ1.png\"),require(\"../../assets/civ2.png\"),require(\"../../assets/civ3.png\")];useEffect(()=>{const fetchQuestions=async()=>{try{const res=await fetch(\"/api/questions/\".concat(quizId));const data=await res.json();setQuestions(data);}catch(err){console.error(\"Failed to fetch questions:\",err);}};if(quizId)fetchQuestions();},[quizId]);if(!quizId)return/*#__PURE__*/_jsx(\"div\",{children:\"\\u05DC\\u05D0 \\u05E0\\u05D1\\u05D7\\u05E8 \\u05E7\\u05D5\\u05D5\\u05D9\\u05D6\"});if(questions.length===0)return/*#__PURE__*/_jsx(\"div\",{children:\"\\u05D8\\u05D5\\u05E2\\u05DF \\u05E9\\u05D0\\u05DC\\u05D5\\u05EA...\"});const currentQuestion=questions[currentIndex];const handleAnswerClick=index=>{if(index===currentQuestion.correctAnswerIndex){setFeedback(Texts.correct_answer_alert);setCitizenCount(prev=>Math.min(prev+1,CiviliansSprites.length));}else{setFeedback(Texts.wrong_answer_alert);setCitizenCount(prev=>Math.max(prev-1,1));}setTimeout(()=>{setFeedback(\"\");setCurrentIndex(prev=>prev+1<questions.length?prev+1:prev);},1200);};return/*#__PURE__*/_jsxs(\"div\",{className:\"quiz-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"left-side\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"info-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"citizen-count-box\",children:[Texts.citizen_counter,\" \",citizenCount]}),/*#__PURE__*/_jsx(\"div\",{className:\"feedback-box\",children:feedback}),/*#__PURE__*/_jsx(\"div\",{className:\"game-frame\",children:/*#__PURE__*/_jsx(\"div\",{className:\"citizens-panel\",children:CiviliansSprites.slice(0,citizenCount).map((src,index)=>/*#__PURE__*/_jsx(\"img\",{src:src,alt:\"\\u05D0\\u05D6\\u05E8\\u05D7 \".concat(index+1),className:\"citizen-img\"},index))})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"right-side\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"question-box\",children:currentQuestion.question}),/*#__PURE__*/_jsx(\"div\",{className:\"answers-grid\",children:currentQuestion.answers.map((ans,idx)=>/*#__PURE__*/_jsx(\"button\",{className:\"answer-button\",onClick:()=>handleAnswerClick(idx),children:ans},idx))})]})]});};export default QuizGame;","map":{"version":3,"names":["React","useEffect","useState","Texts","jsx","_jsx","jsxs","_jsxs","QuizGame","_ref","quizId","questions","setQuestions","currentIndex","setCurrentIndex","feedback","setFeedback","citizenCount","setCitizenCount","CiviliansSprites","require","fetchQuestions","res","fetch","concat","data","json","err","console","error","children","length","currentQuestion","handleAnswerClick","index","correctAnswerIndex","correct_answer_alert","prev","Math","min","wrong_answer_alert","max","setTimeout","className","citizen_counter","slice","map","src","alt","question","answers","ans","idx","onClick"],"sources":["D:/QuizQuest/QuizQuest/client/src/components/QuizGame/QuizGame.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport \"./QuizGame.css\";\r\nimport Texts from \"./Text\";\r\n\r\nconst QuizGame = ({ quizId }) => {\r\n    const [questions, setQuestions] = useState([]);\r\n    const [currentIndex, setCurrentIndex] = useState(0);\r\n    const [feedback, setFeedback] = useState(\"\");\r\n    const [citizenCount, setCitizenCount] = useState(1);\r\n\r\n    const CiviliansSprites = [\r\n        require(\"../../assets/civ1.png\"),\r\n        require(\"../../assets/civ2.png\"),\r\n        require(\"../../assets/civ3.png\"),\r\n    ];\r\n\r\n    useEffect(() => {\r\n        const fetchQuestions = async () => {\r\n            try {\r\n                const res = await fetch(`/api/questions/${quizId}`);\r\n                const data = await res.json();\r\n                setQuestions(data);\r\n            } catch (err) {\r\n                console.error(\"Failed to fetch questions:\", err);\r\n            }\r\n        };\r\n        if (quizId) fetchQuestions();\r\n    }, [quizId]);\r\n\r\n    if (!quizId) return <div>לא נבחר קוויז</div>;\r\n    if (questions.length === 0) return <div>טוען שאלות...</div>;\r\n\r\n    const currentQuestion = questions[currentIndex];\r\n\r\n    const handleAnswerClick = (index) => {\r\n        if (index === currentQuestion.correctAnswerIndex) {\r\n            setFeedback(Texts.correct_answer_alert);\r\n            setCitizenCount((prev) => Math.min(prev + 1, CiviliansSprites.length));\r\n        } else {\r\n            setFeedback(Texts.wrong_answer_alert);\r\n            setCitizenCount((prev) => Math.max(prev - 1, 1));\r\n        }\r\n\r\n        setTimeout(() => {\r\n            setFeedback(\"\");\r\n            setCurrentIndex((prev) =>\r\n                prev + 1 < questions.length ? prev + 1 : prev\r\n            );\r\n        }, 1200);\r\n    };\r\n\r\n    return (\r\n        <div className=\"quiz-container\">\r\n            {/* צד שמאל */}\r\n            <div className=\"left-side\">\r\n                <div className=\"info-panel\">\r\n                    <div className=\"citizen-count-box\">\r\n                        {Texts.citizen_counter} {citizenCount}\r\n                    </div>\r\n                    <div className=\"feedback-box\">{feedback}</div>\r\n                    <div className=\"game-frame\">\r\n                        <div className=\"citizens-panel\">\r\n                            {CiviliansSprites.slice(0, citizenCount).map((src, index) => (\r\n                                <img\r\n                                    key={index}\r\n                                    src={src}\r\n                                    alt={`אזרח ${index + 1}`}\r\n                                    className=\"citizen-img\"\r\n                                />\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* צד ימין */}\r\n            <div className=\"right-side\">\r\n                <div className=\"question-box\">{currentQuestion.question}</div>\r\n                <div className=\"answers-grid\">\r\n                    {currentQuestion.answers.map((ans, idx) => (\r\n                        <button\r\n                            key={idx}\r\n                            className=\"answer-button\"\r\n                            onClick={() => handleAnswerClick(idx)}\r\n                        >\r\n                            {ans}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default QuizGame;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}