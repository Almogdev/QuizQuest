{"ast":null,"code":"// client/src/components/QuizGame/QuizGame.jsx\nimport React,{useEffect,useMemo,useState}from\"react\";import\"./QuizGame.css\";import Texts from\"./Text\";// Try to import from src/assets (recommended)\nimport civ1Import from\"../../assets/civ1.png\";import civ2Import from\"../../assets/civ2.png\";import civ3Import from\"../../assets/civ3.png\";/**\r\n * Build sprites array with a fallback to /assets/* in the public folder.\r\n * If your images are in \"public/assets\", the fallback URLs will work.\r\n * If they are in \"src/assets\", the imported ones (civXImport) will load.\r\n */import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CiviliansSprites=[civ1Import||\"\".concat(process.env.PUBLIC_URL||\"\",\"/assets/civ1.png\"),civ2Import||\"\".concat(process.env.PUBLIC_URL||\"\",\"/assets/civ2.png\"),civ3Import||\"\".concat(process.env.PUBLIC_URL||\"\",\"/assets/civ3.png\")];/** Normalize \"correct answer\" from server to a 0-based index safely */function getCorrectIndex(q){const answers=Array.isArray(q===null||q===void 0?void 0:q.answers)?q.answers:[];const val=q===null||q===void 0?void 0:q.correctAnswerIndex;// number\nif(typeof val===\"number\"){// 1-based -> 0-based\nif(val>=1&&val<=answers.length)return val-1;// assume already 0-based\nif(val>=0&&val<answers.length)return val;}// string that might be a number or the answer text\nif(typeof val===\"string\"){const trimmed=val.trim();// numeric string\nconst num=Number.parseInt(trimmed,10);if(!Number.isNaN(num)){if(num>=1&&num<=answers.length)return num-1;// 1-based\nif(num>=0&&num<answers.length)return num;// 0-based\n}// answer text\nconst byText=answers.findIndex(a=>String(a).trim()===trimmed);if(byText!==-1)return byText;}// If server sends \"correctAnswer\" as the actual text (different field name)\nif(q!==null&&q!==void 0&&q.correctAnswer){const byText=answers.findIndex(a=>String(a).trim()===String(q.correctAnswer).trim());if(byText!==-1)return byText;}// Fallback: 0\nreturn 0;}const QuizGame=_ref=>{let{quizId,onFinish}=_ref;const[questions,setQuestions]=useState([]);const[currentIndex,setCurrentIndex]=useState(0);const[feedback,setFeedback]=useState(\"\");const[citizenCount,setCitizenCount]=useState(1);const[score,setScore]=useState(0);const[isLocked,setIsLocked]=useState(false);const[isLoading,setIsLoading]=useState(false);const[loadError,setLoadError]=useState(\"\");const[finished,setFinished]=useState(false);// Recompute current question + its correct index when index changes\nconst currentQuestion=useMemo(()=>questions.length?questions[currentIndex]:null,[questions,currentIndex]);const currentCorrectIndex=useMemo(()=>currentQuestion?getCorrectIndex(currentQuestion):0,[currentQuestion]);// Reset on quiz change\nuseEffect(()=>{setQuestions([]);setCurrentIndex(0);setFeedback(\"\");setCitizenCount(1);setScore(0);setIsLocked(false);setIsLoading(false);setLoadError(\"\");setFinished(false);},[quizId]);// Fetch questions\nuseEffect(()=>{const fetchQuestions=async()=>{if(!quizId)return;setIsLoading(true);setLoadError(\"\");try{const res=await fetch(\"/api/questions/\".concat(quizId));if(!res.ok)throw new Error(\"HTTP \".concat(res.status));const data=await res.json();if(!Array.isArray(data)||data.length===0){throw new Error(\"Empty questions array\");}// IMPORTANT: do NOT shuffle locally unless you also remap correctAnswerIndex.\nsetQuestions(data);}catch(err){console.error(\"Failed to fetch questions:\",err);setLoadError(\"Failed to load questions. Please try again.\");}finally{setIsLoading(false);}};fetchQuestions();},[quizId]);if(!quizId)return/*#__PURE__*/_jsx(\"div\",{children:Texts.no_quiz_selected});if(isLoading)return/*#__PURE__*/_jsx(\"div\",{children:Texts.loading_questions});if(loadError)return/*#__PURE__*/_jsx(\"div\",{children:loadError});if(!questions.length)return/*#__PURE__*/_jsx(\"div\",{children:Texts.loading_questions});const handleAnswerClick=index=>{if(isLocked||finished)return;setIsLocked(true);const isCorrect=index===currentCorrectIndex;if(isCorrect){setFeedback(Texts.correct_answer_alert);setScore(s=>s+1);setCitizenCount(prev=>Math.min(prev+1,CiviliansSprites.length));}else{setFeedback(Texts.wrong_answer_alert);setCitizenCount(prev=>Math.max(prev-1,1));}setTimeout(()=>{setFeedback(\"\");setIsLocked(false);setCurrentIndex(prev=>{const next=prev+1;if(next<questions.length){return next;}else{// Finish\nsetFinished(true);if(typeof onFinish===\"function\"){// compute final score based on last answer result without stale state\nonFinish({score:isCorrect?score+1:score,total:questions.length});}return prev;}});},900);};const handleRestart=()=>{setCurrentIndex(0);setFeedback(\"\");setCitizenCount(1);setScore(0);setIsLocked(false);setFinished(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"quiz-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"left-side\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"info-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"citizen-count-box\",children:[Texts.citizen_counter_label,\" \",citizenCount]}),/*#__PURE__*/_jsx(\"div\",{className:\"feedback-box \".concat(feedback?\"visible\":\"\"),children:feedback}),/*#__PURE__*/_jsx(\"div\",{className:\"game-frame\",children:/*#__PURE__*/_jsx(\"div\",{className:\"citizens-panel\",children:CiviliansSprites.slice(0,citizenCount).map((src,idx)=>/*#__PURE__*/_jsx(\"img\",{src:src,alt:\"Citizen \".concat(idx+1),className:\"citizen-img\",onError:e=>{console.warn(\"Sprite failed to load:\",src);// Visual fallback so you still see *something*\ne.currentTarget.replaceWith(Object.assign(document.createElement(\"div\"),{className:\"citizen-fallback\",title:\"Sprite not found\"}));}},idx))})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"right-side\",children:finished?/*#__PURE__*/_jsxs(\"div\",{className:\"end-screen\",children:[/*#__PURE__*/_jsx(\"h3\",{children:Texts.end_title}),/*#__PURE__*/_jsx(\"p\",{children:Texts.end_summary(score,questions.length)}),/*#__PURE__*/_jsx(\"button\",{className:\"restart-button\",onClick:handleRestart,children:Texts.restart})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"question-box\",children:currentQuestion===null||currentQuestion===void 0?void 0:currentQuestion.question}),/*#__PURE__*/_jsx(\"div\",{className:\"answers-grid\",children:((currentQuestion===null||currentQuestion===void 0?void 0:currentQuestion.answers)||[]).map((ans,idx)=>/*#__PURE__*/_jsx(\"button\",{className:\"answer-button\",onClick:()=>handleAnswerClick(idx),disabled:isLocked,children:ans},idx))})]})})]});};export default QuizGame;","map":{"version":3,"names":["React","useEffect","useMemo","useState","Texts","civ1Import","civ2Import","civ3Import","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CiviliansSprites","concat","process","env","PUBLIC_URL","getCorrectIndex","q","answers","Array","isArray","val","correctAnswerIndex","length","trimmed","trim","num","Number","parseInt","isNaN","byText","findIndex","a","String","correctAnswer","QuizGame","_ref","quizId","onFinish","questions","setQuestions","currentIndex","setCurrentIndex","feedback","setFeedback","citizenCount","setCitizenCount","score","setScore","isLocked","setIsLocked","isLoading","setIsLoading","loadError","setLoadError","finished","setFinished","currentQuestion","currentCorrectIndex","fetchQuestions","res","fetch","ok","Error","status","data","json","err","console","error","children","no_quiz_selected","loading_questions","handleAnswerClick","index","isCorrect","correct_answer_alert","s","prev","Math","min","wrong_answer_alert","max","setTimeout","next","total","handleRestart","className","citizen_counter_label","slice","map","src","idx","alt","onError","e","warn","currentTarget","replaceWith","Object","assign","document","createElement","title","end_title","end_summary","onClick","restart","question","ans","disabled"],"sources":["D:/QuizQuest/QuizQuest/client/src/components/QuizGame/QuizGame.jsx"],"sourcesContent":["// client/src/components/QuizGame/QuizGame.jsx\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\nimport \"./QuizGame.css\";\r\nimport Texts from \"./Text\";\r\n\r\n// Try to import from src/assets (recommended)\r\nimport civ1Import from \"../../assets/civ1.png\";\r\nimport civ2Import from \"../../assets/civ2.png\";\r\nimport civ3Import from \"../../assets/civ3.png\";\r\n\r\n/**\r\n * Build sprites array with a fallback to /assets/* in the public folder.\r\n * If your images are in \"public/assets\", the fallback URLs will work.\r\n * If they are in \"src/assets\", the imported ones (civXImport) will load.\r\n */\r\nconst CiviliansSprites = [\r\n    civ1Import || `${process.env.PUBLIC_URL || \"\"}/assets/civ1.png`,\r\n    civ2Import || `${process.env.PUBLIC_URL || \"\"}/assets/civ2.png`,\r\n    civ3Import || `${process.env.PUBLIC_URL || \"\"}/assets/civ3.png`,\r\n];\r\n\r\n/** Normalize \"correct answer\" from server to a 0-based index safely */\r\nfunction getCorrectIndex(q) {\r\n    const answers = Array.isArray(q?.answers) ? q.answers : [];\r\n    const val = q?.correctAnswerIndex;\r\n\r\n    // number\r\n    if (typeof val === \"number\") {\r\n        // 1-based -> 0-based\r\n        if (val >= 1 && val <= answers.length) return val - 1;\r\n        // assume already 0-based\r\n        if (val >= 0 && val < answers.length) return val;\r\n    }\r\n\r\n    // string that might be a number or the answer text\r\n    if (typeof val === \"string\") {\r\n        const trimmed = val.trim();\r\n\r\n        // numeric string\r\n        const num = Number.parseInt(trimmed, 10);\r\n        if (!Number.isNaN(num)) {\r\n            if (num >= 1 && num <= answers.length) return num - 1; // 1-based\r\n            if (num >= 0 && num < answers.length) return num;      // 0-based\r\n        }\r\n\r\n        // answer text\r\n        const byText = answers.findIndex((a) => String(a).trim() === trimmed);\r\n        if (byText !== -1) return byText;\r\n    }\r\n\r\n    // If server sends \"correctAnswer\" as the actual text (different field name)\r\n    if (q?.correctAnswer) {\r\n        const byText = answers.findIndex(\r\n            (a) => String(a).trim() === String(q.correctAnswer).trim()\r\n        );\r\n        if (byText !== -1) return byText;\r\n    }\r\n\r\n    // Fallback: 0\r\n    return 0;\r\n}\r\n\r\nconst QuizGame = ({ quizId, onFinish }) => {\r\n    const [questions, setQuestions] = useState([]);\r\n    const [currentIndex, setCurrentIndex] = useState(0);\r\n    const [feedback, setFeedback] = useState(\"\");\r\n    const [citizenCount, setCitizenCount] = useState(1);\r\n    const [score, setScore] = useState(0);\r\n    const [isLocked, setIsLocked] = useState(false);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [loadError, setLoadError] = useState(\"\");\r\n    const [finished, setFinished] = useState(false);\r\n\r\n    // Recompute current question + its correct index when index changes\r\n    const currentQuestion = useMemo(\r\n        () => (questions.length ? questions[currentIndex] : null),\r\n        [questions, currentIndex]\r\n    );\r\n\r\n    const currentCorrectIndex = useMemo(\r\n        () => (currentQuestion ? getCorrectIndex(currentQuestion) : 0),\r\n        [currentQuestion]\r\n    );\r\n\r\n    // Reset on quiz change\r\n    useEffect(() => {\r\n        setQuestions([]);\r\n        setCurrentIndex(0);\r\n        setFeedback(\"\");\r\n        setCitizenCount(1);\r\n        setScore(0);\r\n        setIsLocked(false);\r\n        setIsLoading(false);\r\n        setLoadError(\"\");\r\n        setFinished(false);\r\n    }, [quizId]);\r\n\r\n    // Fetch questions\r\n    useEffect(() => {\r\n        const fetchQuestions = async () => {\r\n            if (!quizId) return;\r\n            setIsLoading(true);\r\n            setLoadError(\"\");\r\n            try {\r\n                const res = await fetch(`/api/questions/${quizId}`);\r\n                if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n                const data = await res.json();\r\n\r\n                if (!Array.isArray(data) || data.length === 0) {\r\n                    throw new Error(\"Empty questions array\");\r\n                }\r\n                // IMPORTANT: do NOT shuffle locally unless you also remap correctAnswerIndex.\r\n                setQuestions(data);\r\n            } catch (err) {\r\n                console.error(\"Failed to fetch questions:\", err);\r\n                setLoadError(\"Failed to load questions. Please try again.\");\r\n            } finally {\r\n                setIsLoading(false);\r\n            }\r\n        };\r\n        fetchQuestions();\r\n    }, [quizId]);\r\n\r\n    if (!quizId) return <div>{Texts.no_quiz_selected}</div>;\r\n    if (isLoading) return <div>{Texts.loading_questions}</div>;\r\n    if (loadError) return <div>{loadError}</div>;\r\n    if (!questions.length) return <div>{Texts.loading_questions}</div>;\r\n\r\n    const handleAnswerClick = (index) => {\r\n        if (isLocked || finished) return;\r\n        setIsLocked(true);\r\n\r\n        const isCorrect = index === currentCorrectIndex;\r\n\r\n        if (isCorrect) {\r\n            setFeedback(Texts.correct_answer_alert);\r\n            setScore((s) => s + 1);\r\n            setCitizenCount((prev) => Math.min(prev + 1, CiviliansSprites.length));\r\n        } else {\r\n            setFeedback(Texts.wrong_answer_alert);\r\n            setCitizenCount((prev) => Math.max(prev - 1, 1));\r\n        }\r\n\r\n        setTimeout(() => {\r\n            setFeedback(\"\");\r\n            setIsLocked(false);\r\n\r\n            setCurrentIndex((prev) => {\r\n                const next = prev + 1;\r\n                if (next < questions.length) {\r\n                    return next;\r\n                } else {\r\n                    // Finish\r\n                    setFinished(true);\r\n                    if (typeof onFinish === \"function\") {\r\n                        // compute final score based on last answer result without stale state\r\n                        onFinish({\r\n                            score: isCorrect ? score + 1 : score,\r\n                            total: questions.length,\r\n                        });\r\n                    }\r\n                    return prev;\r\n                }\r\n            });\r\n        }, 900);\r\n    };\r\n\r\n    const handleRestart = () => {\r\n        setCurrentIndex(0);\r\n        setFeedback(\"\");\r\n        setCitizenCount(1);\r\n        setScore(0);\r\n        setIsLocked(false);\r\n        setFinished(false);\r\n    };\r\n\r\n    return (\r\n        <div className=\"quiz-container\">\r\n            {/* LEFT */}\r\n            <div className=\"left-side\">\r\n                <div className=\"info-panel\">\r\n                    <div className=\"citizen-count-box\">\r\n                        {Texts.citizen_counter_label} {citizenCount}\r\n                    </div>\r\n\r\n                    <div className={`feedback-box ${feedback ? \"visible\" : \"\"}`}>\r\n                        {feedback}\r\n                    </div>\r\n\r\n                    <div className=\"game-frame\">\r\n                        <div className=\"citizens-panel\">\r\n                            {CiviliansSprites.slice(0, citizenCount).map((src, idx) => (\r\n                                <img\r\n                                    key={idx}\r\n                                    src={src}\r\n                                    alt={`Citizen ${idx + 1}`}\r\n                                    className=\"citizen-img\"\r\n                                    onError={(e) => {\r\n                                        console.warn(\"Sprite failed to load:\", src);\r\n                                        // Visual fallback so you still see *something*\r\n                                        e.currentTarget.replaceWith(\r\n                                            Object.assign(document.createElement(\"div\"), {\r\n                                                className: \"citizen-fallback\",\r\n                                                title: \"Sprite not found\",\r\n                                            })\r\n                                        );\r\n                                    }}\r\n                                />\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* RIGHT */}\r\n            <div className=\"right-side\">\r\n                {finished ? (\r\n                    <div className=\"end-screen\">\r\n                        <h3>{Texts.end_title}</h3>\r\n                        <p>{Texts.end_summary(score, questions.length)}</p>\r\n                        <button className=\"restart-button\" onClick={handleRestart}>\r\n                            {Texts.restart}\r\n                        </button>\r\n                    </div>\r\n                ) : (\r\n                    <>\r\n                        <div className=\"question-box\">{currentQuestion?.question}</div>\r\n                        <div className=\"answers-grid\">\r\n                            {(currentQuestion?.answers || []).map((ans, idx) => (\r\n                                <button\r\n                                    key={idx}\r\n                                    className=\"answer-button\"\r\n                                    onClick={() => handleAnswerClick(idx)}\r\n                                    disabled={isLocked}\r\n                                >\r\n                                    {ans}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n\r\n                        {/* DEBUG (optional): uncomment for quick verify */}\r\n                        {/* <pre style={{ fontSize: 12, opacity: 0.6 }}>\r\n              {JSON.stringify({ currentIndex, currentCorrectIndex, answers: currentQuestion?.answers }, null, 2)}\r\n            </pre> */}\r\n                    </>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default QuizGame;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}