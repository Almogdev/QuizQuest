{"ast":null,"code":"import React,{useEffect,useState,useMemo}from\"react\";import\"./SchoolList.css\";/**\r\n * Props:\r\n * - onSelect?: (school) => void   // optional; called when a school is clicked\r\n * - initialSelectedId?: number    // optional; preselect a school by id\r\n */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SchoolList=_ref=>{let{onSelect,initialSelectedId=null}=_ref;const[schools,setSchools]=useState([]);const[loading,setLoading]=useState(true);const[err,setErr]=useState(\"\");const[selectedId,setSelectedId]=useState(initialSelectedId);const[q,setQ]=useState(\"\");useEffect(()=>{let isMounted=true;setLoading(true);fetch(\"/api/schools\").then(r=>{if(!r.ok)throw new Error(\"Failed to load schools\");return r.json();}).then(data=>{if(!isMounted)return;setSchools(Array.isArray(data)?data:[]);setLoading(false);}).catch(e=>{if(!isMounted)return;console.error(\"Error fetching schools:\",e);setErr(\"Could not load schools.\");setLoading(false);});return()=>{isMounted=false;};},[]);const filtered=useMemo(()=>{const term=q.trim().toLowerCase();if(!term)return schools;return schools.filter(s=>[s.name,s.city].filter(Boolean).some(v=>v.toLowerCase().includes(term)));},[q,schools]);const handleClick=s=>{setSelectedId(s.id);onSelect&&onSelect(s);// optional integration hook\n};return/*#__PURE__*/_jsxs(\"aside\",{className:\"school-list\",\"aria-label\":\"Top schools\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"school-list__header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Top Schools\"}),/*#__PURE__*/_jsx(\"input\",{className:\"school-list__search\",type:\"text\",placeholder:\"Search\\u2026\",value:q,onChange:e=>setQ(e.target.value),\"aria-label\":\"Search schools\"})]}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"school-list__status\",children:\"Loading\\u2026\"}),err&&!loading&&/*#__PURE__*/_jsx(\"div\",{className:\"school-list__error\",children:err}),!loading&&!err&&/*#__PURE__*/_jsxs(\"ul\",{className:\"school-list__ul\",children:[filtered.map((s,idx)=>{var _s$points;const isActive=s.id===selectedId;return/*#__PURE__*/_jsxs(\"li\",{className:\"school-list__item \".concat(isActive?\"is-active\":\"\"),onClick:()=>handleClick(s),role:\"button\",tabIndex:0,onKeyDown:e=>(e.key===\"Enter\"||e.key===\" \")&&handleClick(s),title:s.name,children:[/*#__PURE__*/_jsx(\"div\",{className:\"school-list__rank\",children:idx+1}),/*#__PURE__*/_jsxs(\"div\",{className:\"school-list__main\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"school-list__name\",children:s.name}),/*#__PURE__*/_jsx(\"div\",{className:\"school-list__meta\",children:s.city||\"—\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"school-list__points\",children:[(_s$points=s.points)!==null&&_s$points!==void 0?_s$points:0,\" pts\"]})]},s.id);}),filtered.length===0&&/*#__PURE__*/_jsx(\"li\",{className:\"school-list__empty\",children:\"No schools found.\"})]})]});};export default SchoolList;","map":{"version":3,"names":["React","useEffect","useState","useMemo","jsx","_jsx","jsxs","_jsxs","SchoolList","_ref","onSelect","initialSelectedId","schools","setSchools","loading","setLoading","err","setErr","selectedId","setSelectedId","q","setQ","isMounted","fetch","then","r","ok","Error","json","data","Array","isArray","catch","e","console","error","filtered","term","trim","toLowerCase","filter","s","name","city","Boolean","some","v","includes","handleClick","id","className","children","type","placeholder","value","onChange","target","map","idx","_s$points","isActive","concat","onClick","role","tabIndex","onKeyDown","key","title","points","length"],"sources":["D:/QuizQuest/QuizQuest/client/src/components/SchoolsList/SchoolList.jsx"],"sourcesContent":["import React, { useEffect, useState, useMemo } from \"react\";\r\nimport \"./SchoolList.css\";\r\n\r\n/**\r\n * Props:\r\n * - onSelect?: (school) => void   // optional; called when a school is clicked\r\n * - initialSelectedId?: number    // optional; preselect a school by id\r\n */\r\nconst SchoolList = ({ onSelect, initialSelectedId = null }) => {\r\n    const [schools, setSchools] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [err, setErr] = useState(\"\");\r\n    const [selectedId, setSelectedId] = useState(initialSelectedId);\r\n    const [q, setQ] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        let isMounted = true;\r\n        setLoading(true);\r\n        fetch(\"/api/schools\")\r\n            .then((r) => {\r\n                if (!r.ok) throw new Error(\"Failed to load schools\");\r\n                return r.json();\r\n            })\r\n            .then((data) => {\r\n                if (!isMounted) return;\r\n                setSchools(Array.isArray(data) ? data : []);\r\n                setLoading(false);\r\n            })\r\n            .catch((e) => {\r\n                if (!isMounted) return;\r\n                console.error(\"Error fetching schools:\", e);\r\n                setErr(\"Could not load schools.\");\r\n                setLoading(false);\r\n            });\r\n        return () => {\r\n            isMounted = false;\r\n        };\r\n    }, []);\r\n\r\n    const filtered = useMemo(() => {\r\n        const term = q.trim().toLowerCase();\r\n        if (!term) return schools;\r\n        return schools.filter((s) =>\r\n            [s.name, s.city].filter(Boolean).some((v) => v.toLowerCase().includes(term))\r\n        );\r\n    }, [q, schools]);\r\n\r\n    const handleClick = (s) => {\r\n        setSelectedId(s.id);\r\n        onSelect && onSelect(s); // optional integration hook\r\n    };\r\n\r\n    return (\r\n        <aside className=\"school-list\" aria-label=\"Top schools\">\r\n            <div className=\"school-list__header\">\r\n                <h2>Top Schools</h2>\r\n                <input\r\n                    className=\"school-list__search\"\r\n                    type=\"text\"\r\n                    placeholder=\"Search…\"\r\n                    value={q}\r\n                    onChange={(e) => setQ(e.target.value)}\r\n                    aria-label=\"Search schools\"\r\n                />\r\n            </div>\r\n\r\n            {loading && <div className=\"school-list__status\">Loading…</div>}\r\n            {err && !loading && <div className=\"school-list__error\">{err}</div>}\r\n\r\n            {!loading && !err && (\r\n                <ul className=\"school-list__ul\">\r\n                    {filtered.map((s, idx) => {\r\n                        const isActive = s.id === selectedId;\r\n                        return (\r\n                            <li\r\n                                key={s.id}\r\n                                className={`school-list__item ${isActive ? \"is-active\" : \"\"}`}\r\n                                onClick={() => handleClick(s)}\r\n                                role=\"button\"\r\n                                tabIndex={0}\r\n                                onKeyDown={(e) => (e.key === \"Enter\" || e.key === \" \") && handleClick(s)}\r\n                                title={s.name}\r\n                            >\r\n                                <div className=\"school-list__rank\">{idx + 1}</div>\r\n                                <div className=\"school-list__main\">\r\n                                    <div className=\"school-list__name\">{s.name}</div>\r\n                                    <div className=\"school-list__meta\">{s.city || \"—\"}</div>\r\n                                </div>\r\n                                <div className=\"school-list__points\">{s.points ?? 0} pts</div>\r\n                            </li>\r\n                        );\r\n                    })}\r\n                    {filtered.length === 0 && (\r\n                        <li className=\"school-list__empty\">No schools found.</li>\r\n                    )}\r\n                </ul>\r\n            )}\r\n        </aside>\r\n    );\r\n};\r\n\r\nexport default SchoolList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}