{"ast":null,"code":"var _jsxFileName = \"D:\\\\QuizQuest\\\\QuizQuest\\\\client\\\\src\\\\pages\\\\map\\\\map.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useMemo } from \"react\";\nimport { APIProvider, Map, Marker, InfoWindow } from \"@vis.gl/react-google-maps\";\nimport Header from \"../../components/Header/Header\";\nimport Footer from \"../../components/Footer/Footer\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst MapPage = () => {\n  _s();\n  var _selected$score;\n  const apiKey = process.env.REACT_APP_GOOGLE_MAPS_API_KEY;\n  const [schools, setSchools] = useState([]);\n  const [selectedId, setSelectedId] = useState(null);\n  useEffect(() => {\n    fetch(\"/api/schools\").then(r => r.json()).then(data => setSchools(Array.isArray(data) ? data : [])).catch(e => console.error(\"Failed to fetch schools:\", e));\n  }, []);\n  const markers = useMemo(() => schools.filter(s => s.lat != null && s.lng != null).map(s => ({\n    ...s,\n    position: {\n      lat: Number(s.lat),\n      lng: Number(s.lng)\n    } // MySQL DECIMAL may arrive as strings\n  })), [schools]);\n  const selected = useMemo(() => markers.find(m => m.id === selectedId), [markers, selectedId]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(APIProvider, {\n      apiKey: apiKey,\n      onLoad: () => console.log(\"Maps API loaded\"),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: \"100%\",\n          height: 735,\n          borderRadius: 12,\n          overflow: \"hidden\",\n          margin: \"0px 0\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Map, {\n          defaultCenter: {\n            lat: 32.0853,\n            lng: 34.7818\n          } // Tel Aviv\n          ,\n          defaultZoom: 8,\n          gestureHandling: \"greedy\",\n          disableDefaultUI: false,\n          children: [markers.map(m => {\n            var _m$score;\n            return /*#__PURE__*/_jsxDEV(Marker, {\n              position: m.position,\n              title: `${m.name} (${m.city || \"Unknown city\"}) - ${(_m$score = m.score) !== null && _m$score !== void 0 ? _m$score : 0} pts`,\n              onClick: () => setSelectedId(m.id)\n            }, m.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 46,\n              columnNumber: 15\n            }, this);\n          }), selected && /*#__PURE__*/_jsxDEV(InfoWindow, {\n            position: selected.position,\n            onCloseClick: () => setSelectedId(null),\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                minWidth: 200\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontWeight: 600,\n                  marginBottom: 4\n                },\n                children: selected.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 60,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: 12,\n                  opacity: 0.8\n                },\n                children: [selected.city || \"Unknown city\", \" 路 \", \"Score: \", (_selected$score = selected.score) !== null && _selected$score !== void 0 ? _selected$score : 0, selected.best_category ? ` 路 Best: ${selected.best_category}` : \"\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 61,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(MapPage, \"yhrHOxedaazOKvC1dyyRwogzz4g=\");\n_c = MapPage;\nexport default MapPage;\nvar _c;\n$RefreshReg$(_c, \"MapPage\");","map":{"version":3,"names":["React","useEffect","useState","useMemo","APIProvider","Map","Marker","InfoWindow","Header","Footer","jsxDEV","_jsxDEV","Fragment","_Fragment","MapPage","_s","_selected$score","apiKey","process","env","REACT_APP_GOOGLE_MAPS_API_KEY","schools","setSchools","selectedId","setSelectedId","fetch","then","r","json","data","Array","isArray","catch","e","console","error","markers","filter","s","lat","lng","map","position","Number","selected","find","m","id","children","fileName","_jsxFileName","lineNumber","columnNumber","onLoad","log","style","width","height","borderRadius","overflow","margin","defaultCenter","defaultZoom","gestureHandling","disableDefaultUI","_m$score","title","name","city","score","onClick","onCloseClick","minWidth","fontWeight","marginBottom","fontSize","opacity","best_category","_c","$RefreshReg$"],"sources":["D:/QuizQuest/QuizQuest/client/src/pages/map/map.jsx"],"sourcesContent":["import React, { useEffect, useState, useMemo } from \"react\";\r\nimport { APIProvider, Map, Marker, InfoWindow } from \"@vis.gl/react-google-maps\";\r\nimport Header from \"../../components/Header/Header\";\r\nimport Footer from \"../../components/Footer/Footer\";\r\n\r\nconst MapPage = () => {\r\n  const apiKey = process.env.REACT_APP_GOOGLE_MAPS_API_KEY;\r\n  const [schools, setSchools] = useState([]);\r\n  const [selectedId, setSelectedId] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetch(\"/api/schools\")\r\n      .then((r) => r.json())\r\n      .then((data) => setSchools(Array.isArray(data) ? data : []))\r\n      .catch((e) => console.error(\"Failed to fetch schools:\", e));\r\n  }, []);\r\n\r\n  const markers = useMemo(\r\n    () =>\r\n      schools\r\n        .filter((s) => s.lat != null && s.lng != null)\r\n        .map((s) => ({\r\n          ...s,\r\n          position: { lat: Number(s.lat), lng: Number(s.lng) }, // MySQL DECIMAL may arrive as strings\r\n        })),\r\n    [schools]\r\n  );\r\n\r\n  const selected = useMemo(\r\n    () => markers.find((m) => m.id === selectedId),\r\n    [markers, selectedId]\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <Header />\r\n      <APIProvider apiKey={apiKey} onLoad={() => console.log(\"Maps API loaded\")}>\r\n        <div style={{ width: \"100%\", height: 735, borderRadius: 12, overflow: \"hidden\", margin: \"0px 0\" }}>\r\n          <Map\r\n            defaultCenter={{ lat: 32.0853, lng: 34.7818 }} // Tel Aviv\r\n            defaultZoom={8}\r\n            gestureHandling={\"greedy\"}\r\n            disableDefaultUI={false}\r\n          >\r\n            {markers.map((m) => (\r\n              <Marker\r\n                key={m.id}\r\n                position={m.position}\r\n                title={`${m.name} (${m.city || \"Unknown city\"}) - ${m.score ?? 0} pts`}\r\n                onClick={() => setSelectedId(m.id)}\r\n              />\r\n            ))}\r\n\r\n            {selected && (\r\n              <InfoWindow\r\n                position={selected.position}\r\n                onCloseClick={() => setSelectedId(null)}\r\n              >\r\n                <div style={{ minWidth: 200 }}>\r\n                  <div style={{ fontWeight: 600, marginBottom: 4 }}>{selected.name}</div>\r\n                  <div style={{ fontSize: 12, opacity: 0.8 }}>\r\n                    {selected.city || \"Unknown city\"}\r\n                    {\" 路 \"}\r\n                    Score: {selected.score ?? 0}\r\n                    {selected.best_category ? ` 路 Best: ${selected.best_category}` : \"\"}\r\n                  </div>\r\n                </div>\r\n              </InfoWindow>\r\n            )}\r\n          </Map>\r\n        </div>\r\n      </APIProvider>\r\n      <Footer />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MapPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}