{"ast":null,"code":"import React,{useEffect,useMemo,useState}from\"react\";import{useParams}from\"react-router-dom\";import\"./QuizGame.css\";const Texts={loading:\"Loading questions...\",error:\"Failed to load questions.\",correct:\"Correct! Great job!\",wrong:\"Oops! That's not correct.\",citizens:\"Citizens:\",endTitle:\"Quiz finished!\",endSummary:(score,total)=>\"You scored \".concat(score,\" out of \").concat(total,\".\"),restart:\"Restart\"};import civ1 from\"../../assets/civ1.png\";import civ2 from\"../../assets/civ2.png\";import civ3 from\"../../assets/civ3.png\";import gameBg from\"../../assets/game_bg.png\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CIVS=[civ1,civ2,civ3];const MAX_SPRITES=CIVS.length;const QuizGame=_ref=>{let{onFinish}=_ref;const{id}=useParams();const quizId=Number(id)>0?Number(id):1;const[questions,setQuestions]=useState([]);const[idx,setIdx]=useState(0);const[feedback,setFeedback]=useState(\"\");const[citizens,setCitizens]=useState(0);const[locked,setLocked]=useState(false);const[loading,setLoading]=useState(false);const[loadError,setLoadError]=useState(\"\");const[finished,setFinished]=useState(false);useEffect(()=>{let cancel=false;const load=async()=>{setLoading(true);setLoadError(\"\");setQuestions([]);setIdx(0);setFeedback(\"\");setCitizens(0);setLocked(false);setFinished(false);try{// NOTE: הקומפוננטה הזו משתמשת ב-/api/quiz/:id שמחזיר correctAnswer כטקסט\nconst res=await fetch(\"/api/quiz/\".concat(quizId));if(!res.ok)throw new Error(\"HTTP \".concat(res.status));const data=await res.json();const list=Array.isArray(data===null||data===void 0?void 0:data.questions)?data.questions:[];const normalized=list.map(q=>{var _q$question,_q$answers,_q$correctAnswer;return{question:(_q$question=q.question)!==null&&_q$question!==void 0?_q$question:\"\",answers:((_q$answers=q.answers)!==null&&_q$answers!==void 0?_q$answers:[]).map(a=>String(a!==null&&a!==void 0?a:\"\").trim()).filter(Boolean),correctAnswer:String((_q$correctAnswer=q.correctAnswer)!==null&&_q$correctAnswer!==void 0?_q$correctAnswer:\"\").trim()};});if(!cancel)setQuestions(normalized);}catch(e){console.error(e);if(!cancel)setLoadError(Texts.error);}finally{if(!cancel)setLoading(false);}};load();return()=>{cancel=true;};},[quizId]);const cur=useMemo(()=>questions.length?questions[idx]:null,[questions,idx]);// ✨ NEW: submit the final score to the server\nconst submitResult=async(finalScore,quiz)=>{const token=localStorage.getItem(\"token\");if(!token)return;// Guests play without server writes\ntry{await fetch(\"/api/game/submit\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)},body:JSON.stringify({quizId:Number(quiz)||1,scoreDelta:Number(finalScore)||0})});}catch(e){console.error(\"Submit result failed:\",e);}};if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"status\",children:Texts.loading});if(loadError)return/*#__PURE__*/_jsx(\"div\",{className:\"status error\",children:loadError});if(!cur)return/*#__PURE__*/_jsx(\"div\",{className:\"status\",children:Texts.loading});const handleClick=answerText=>{var _cur$correctAnswer;if(locked||finished)return;setLocked(true);const clicked=String(answerText!==null&&answerText!==void 0?answerText:\"\").trim();const correct=String((_cur$correctAnswer=cur.correctAnswer)!==null&&_cur$correctAnswer!==void 0?_cur$correctAnswer:\"\").trim();const isCorrect=clicked===correct;setCitizens(prev=>isCorrect?prev+1:Math.max(prev-1,0));setFeedback(isCorrect?Texts.correct:Texts.wrong);setTimeout(()=>{setFeedback(\"\");setLocked(false);setIdx(prevIdx=>{const next=prevIdx+1;if(next<questions.length)return next;// ✨ End of quiz\nif(!finished){setFinished(true);// שולחות תוצאה מהסטייט (לא מה-DOM)\nsubmitResult(citizens,quizId);// אופציונלי: לדווח להורה אם קיים\nif(typeof onFinish===\"function\"){onFinish({score:citizens,total:questions.length,quizId});}}return prevIdx;});},800);};const restart=()=>{setIdx(0);setFeedback(\"\");setCitizens(0);setLocked(false);setFinished(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"quiz-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"left-side\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"info-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pill\",children:[Texts.citizens,\" \",citizens]}),/*#__PURE__*/_jsx(\"div\",{className:\"feedback \".concat(feedback?\"visible\":\"\"),children:feedback}),/*#__PURE__*/_jsx(\"div\",{className:\"game-frame\",style:{backgroundImage:\"url(\".concat(gameBg,\")\")},children:/*#__PURE__*/_jsx(\"div\",{className:\"citizens-panel\",children:CIVS.slice(0,Math.min(citizens,MAX_SPRITES)).map((src,i)=>/*#__PURE__*/_jsx(\"img\",{src:src,alt:\"Citizen \".concat(i+1),className:\"citizen-img\"},i))})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"right-side\",children:finished?/*#__PURE__*/_jsxs(\"div\",{className:\"end\",children:[/*#__PURE__*/_jsx(\"h3\",{children:Texts.endTitle}),/*#__PURE__*/_jsx(\"p\",{children:Texts.endSummary(citizens,questions.length)}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:restart,children:Texts.restart})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"question\",children:cur.question}),/*#__PURE__*/_jsx(\"div\",{className:\"answers\",children:cur.answers.map((ans,i)=>/*#__PURE__*/_jsx(\"button\",{className:\"btn answer\",onClick:()=>handleClick(ans),disabled:locked,children:ans},i))})]})})]});};export default QuizGame;","map":{"version":3,"names":["React","useEffect","useMemo","useState","useParams","Texts","loading","error","correct","wrong","citizens","endTitle","endSummary","score","total","concat","restart","civ1","civ2","civ3","gameBg","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CIVS","MAX_SPRITES","length","QuizGame","_ref","onFinish","id","quizId","Number","questions","setQuestions","idx","setIdx","feedback","setFeedback","setCitizens","locked","setLocked","setLoading","loadError","setLoadError","finished","setFinished","cancel","load","res","fetch","ok","Error","status","data","json","list","Array","isArray","normalized","map","q","_q$question","_q$answers","_q$correctAnswer","question","answers","a","String","trim","filter","Boolean","correctAnswer","e","console","cur","submitResult","finalScore","quiz","token","localStorage","getItem","method","headers","Authorization","body","JSON","stringify","scoreDelta","className","children","handleClick","answerText","_cur$correctAnswer","clicked","isCorrect","prev","Math","max","setTimeout","prevIdx","next","style","backgroundImage","slice","min","src","i","alt","onClick","ans","disabled"],"sources":["D:/QuizQuest/QuizQuest/client/src/components/QuizGame/QuizGame.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport \"./QuizGame.css\";\r\n\r\nconst Texts = {\r\n    loading: \"Loading questions...\",\r\n    error: \"Failed to load questions.\",\r\n    correct: \"Correct! Great job!\",\r\n    wrong: \"Oops! That's not correct.\",\r\n    citizens: \"Citizens:\",\r\n    endTitle: \"Quiz finished!\",\r\n    endSummary: (score, total) => `You scored ${score} out of ${total}.`,\r\n    restart: \"Restart\",\r\n};\r\n\r\nimport civ1 from \"../../assets/civ1.png\";\r\nimport civ2 from \"../../assets/civ2.png\";\r\nimport civ3 from \"../../assets/civ3.png\";\r\nimport gameBg from \"../../assets/game_bg.png\";\r\n\r\nconst CIVS = [civ1, civ2, civ3];\r\nconst MAX_SPRITES = CIVS.length;\r\n\r\nconst QuizGame = ({ onFinish }) => {\r\n    const { id } = useParams();\r\n    const quizId = Number(id) > 0 ? Number(id) : 1;\r\n\r\n    const [questions, setQuestions] = useState([]);\r\n    const [idx, setIdx] = useState(0);\r\n    const [feedback, setFeedback] = useState(\"\");\r\n    const [citizens, setCitizens] = useState(0);\r\n    const [locked, setLocked] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n    const [loadError, setLoadError] = useState(\"\");\r\n    const [finished, setFinished] = useState(false);\r\n\r\n    useEffect(() => {\r\n        let cancel = false;\r\n\r\n        const load = async () => {\r\n            setLoading(true);\r\n            setLoadError(\"\");\r\n            setQuestions([]);\r\n            setIdx(0);\r\n            setFeedback(\"\");\r\n            setCitizens(0);\r\n            setLocked(false);\r\n            setFinished(false);\r\n\r\n            try {\r\n                // NOTE: הקומפוננטה הזו משתמשת ב-/api/quiz/:id שמחזיר correctAnswer כטקסט\r\n                const res = await fetch(`/api/quiz/${quizId}`);\r\n                if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n                const data = await res.json();\r\n                const list = Array.isArray(data?.questions) ? data.questions : [];\r\n                const normalized = list.map((q) => ({\r\n                    question: q.question ?? \"\",\r\n                    answers: (q.answers ?? [])\r\n                        .map((a) => String(a ?? \"\").trim())\r\n                        .filter(Boolean),\r\n                    correctAnswer: String(q.correctAnswer ?? \"\").trim(),\r\n                }));\r\n                if (!cancel) setQuestions(normalized);\r\n            } catch (e) {\r\n                console.error(e);\r\n                if (!cancel) setLoadError(Texts.error);\r\n            } finally {\r\n                if (!cancel) setLoading(false);\r\n            }\r\n        };\r\n\r\n        load();\r\n        return () => {\r\n            cancel = true;\r\n        };\r\n    }, [quizId]);\r\n\r\n    const cur = useMemo(() => (questions.length ? questions[idx] : null), [questions, idx]);\r\n\r\n    // ✨ NEW: submit the final score to the server\r\n    const submitResult = async (finalScore, quiz) => {\r\n        const token = localStorage.getItem(\"token\");\r\n        if (!token) return; // Guests play without server writes\r\n        try {\r\n            await fetch(\"/api/game/submit\", {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    Authorization: `Bearer ${token}`,\r\n                },\r\n                body: JSON.stringify({\r\n                    quizId: Number(quiz) || 1,\r\n                    scoreDelta: Number(finalScore) || 0,\r\n                }),\r\n            });\r\n        } catch (e) {\r\n            console.error(\"Submit result failed:\", e);\r\n        }\r\n    };\r\n\r\n    if (loading) return <div className=\"status\">{Texts.loading}</div>;\r\n    if (loadError) return <div className=\"status error\">{loadError}</div>;\r\n    if (!cur) return <div className=\"status\">{Texts.loading}</div>;\r\n\r\n    const handleClick = (answerText) => {\r\n        if (locked || finished) return;\r\n        setLocked(true);\r\n\r\n        const clicked = String(answerText ?? \"\").trim();\r\n        const correct = String(cur.correctAnswer ?? \"\").trim();\r\n        const isCorrect = clicked === correct;\r\n\r\n        setCitizens((prev) => (isCorrect ? prev + 1 : Math.max(prev - 1, 0)));\r\n        setFeedback(isCorrect ? Texts.correct : Texts.wrong);\r\n\r\n        setTimeout(() => {\r\n            setFeedback(\"\");\r\n            setLocked(false);\r\n\r\n            setIdx((prevIdx) => {\r\n                const next = prevIdx + 1;\r\n                if (next < questions.length) return next;\r\n\r\n                // ✨ End of quiz\r\n                if (!finished) {\r\n                    setFinished(true);\r\n                    // שולחות תוצאה מהסטייט (לא מה-DOM)\r\n                    submitResult(citizens, quizId);\r\n                    // אופציונלי: לדווח להורה אם קיים\r\n                    if (typeof onFinish === \"function\") {\r\n                        onFinish({ score: citizens, total: questions.length, quizId });\r\n                    }\r\n                }\r\n                return prevIdx;\r\n            });\r\n        }, 800);\r\n    };\r\n\r\n    const restart = () => {\r\n        setIdx(0);\r\n        setFeedback(\"\");\r\n        setCitizens(0);\r\n        setLocked(false);\r\n        setFinished(false);\r\n    };\r\n\r\n    return (\r\n        <div className=\"quiz-container\">\r\n            <div className=\"left-side\">\r\n                <div className=\"info-panel\">\r\n                    <div className=\"pill\">\r\n                        {Texts.citizens} {citizens}\r\n                    </div>\r\n\r\n                    <div className={`feedback ${feedback ? \"visible\" : \"\"}`}>{feedback}</div>\r\n\r\n                    <div\r\n                        className=\"game-frame\"\r\n                        style={{ backgroundImage: `url(${gameBg})` }}\r\n                    >\r\n                        <div className=\"citizens-panel\">\r\n                            {CIVS.slice(0, Math.min(citizens, MAX_SPRITES)).map((src, i) => (\r\n                                <img key={i} src={src} alt={`Citizen ${i + 1}`} className=\"citizen-img\" />\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"right-side\">\r\n                {finished ? (\r\n                    <div className=\"end\">\r\n                        <h3>{Texts.endTitle}</h3>\r\n                        <p>{Texts.endSummary(citizens, questions.length)}</p>\r\n                        <button className=\"btn\" onClick={restart}>{Texts.restart}</button>\r\n                    </div>\r\n                ) : (\r\n                    <>\r\n                        <div className=\"question\">{cur.question}</div>\r\n                        <div className=\"answers\">\r\n                            {cur.answers.map((ans, i) => (\r\n                                <button\r\n                                    key={i}\r\n                                    className=\"btn answer\"\r\n                                    onClick={() => handleClick(ans)}\r\n                                    disabled={locked}\r\n                                >\r\n                                    {ans}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default QuizGame;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}